<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>API</title>

    <link rel="stylesheet" href="../bootstrap-4.0.0-alpha.6-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../main.css">

</head>
    <body>
        <div class="container">
            <div class="col-12">
                <h4 class="center">CO600 Project Corpus</h4>
                <h5 class="center">API</h5>
                
                <div class="row">
                    <div class="col-12">
                        <div class="wrapper">
                            <p>Our REST API provides a resourceful interface to our devices, the areas they're in and all the datapoint measurements associated with them.</p>
                            <p>To build the RESTful API we use a combination of Laravel's inbuilt API features to setup the core framework. We then use The PHPLeague's resource transformers, this allows us to transform our models into resources with additional features such as including, meeting the criteria of the json response standard JSONAPI giving people a documented standard to understand our responses faster.</p>
                            <p>The data is split between the Readings, Still Heres and Errors timeseries in InfluxDB. And our more relational structures of Devices and Areas in MySQL.</p>
                            <p>We also have sixth model which we use that is the basis of stats. This model applies arregates on the readings to provides stats such as the average reading, the amount of readings and more.</p>
                            <p>The relational structure of MySQL is used to allow us to have IDs for devices and apply them as tags on the timeseries datapoints. It also allows us to provide a relation of many devices to one area to provide more structure by grouping the devices. The Areas can then have a parent area to provide endless recursive grouping.</p>
                            <p>Each of the six models acts as a basis of an endpoint. We provide Indexes and Shows, that provide a list of data or data for a specific ID. Such as "/devices" being a list of device data and "/devices/abc1" being the device data for device abc1.</p>
                            <p>For the influxdb measurement endpoints we also provide a series of different time interval groupings such as Daily, Monthly and Yearly. This allows the many datapoints to be grouped and averaged to better understand the data over a longer period of time.</p>
                            <p>To filter out the measurements per devices and then grouped further to areas we provide subresource endpoints such as "/device/abc1/reading" Which would provide all readings belonging to device abc1.</p>
                            <p>Using Laravel's migration feature we allow the MySQL schema structure be built and setup with a single command. This also allows for easy additions to it in the future.</p>
                            <p>For Testing, we use a combination of Laravel's Seeders and Factories to create fake data that then allows us to test the endpoints are bringing back that data succesful. For the tests themselves we use PHPUnit and Laravel's helpers to call the endpoints and check the responses.</p>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <ul class="list-group">
                            <li class="list-group-item"><a href="../api/app/Models/Area.php" target="_blank">Area.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Models/Device.php" target="_blank">Device.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Models/Error.php" target="_blank">Error.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Models/Reading.php" target="_blank">Reading.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Models/Stat.php" target="_blank">Stat.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Models/StillHere.php" target="_blank">StillHere.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Http/Controllers/AreaController.php" target="_blank">AreaController.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Http/Controllers/DeviceController.php" target="_blank">DeviceController.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Http/Controllers/ErrorController.php" target="_blank">ErrorController.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Http/Controllers/ReadingController.php" target="_blank">ReadingController.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Http/Controllers/StatController.php" target="_blank">StatController.php</a></li>
                            <li class="list-group-item"><a href="../api/app/Http/Controllers/StillHereController.php" target="_blank">StillHereController.php</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="container">&copy; CO600 Flood Watch 2018</div>
        </footer>
    </body>
</html>